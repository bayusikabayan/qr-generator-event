<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event QR Code Generator (Stable)</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <style>
        body { font-family: system-ui, -apple-system, sans-serif; background-color: #f5f5f5; margin: 0; padding: 20px; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .container { background-color: #ffffff; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); width: 100%; max-width: 450px; box-sizing: border-box; text-align: center; }
        #page-logo { width: 80px; margin-bottom: 20px; }
        h1 { color: #333; margin-bottom: 25px; font-size: 1.5em; }
        .form-group { margin-bottom: 18px; text-align: left; }
        label { display: block; margin-bottom: 6px; font-weight: 600; color: #555; font-size: 0.9em; }
        input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 1em; }
        button { width: 100%; padding: 15px; background-color: #007bff; color: white; border: none; border-radius: 8px; font-size: 1em; font-weight: bold; cursor: pointer; }
        #qr-output { margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; display: none; }
        #qrcode { display: inline-block; padding: 6px; background-color: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        #instruction-text { margin-top: 15px; font-weight: 500; color: #e74c3c; }
        #download-link { background-color: #28a745; color: white; padding: 10px 15px; text-decoration: none; border-radius: 8px; margin-top: 20px; display: none; }
    </style>
</head>
<body>
    <div class="container">
        <img id="page-logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMy4xMg9QLc8AAALwSURBVFhH7Zf/i9NQFMefc+87EZHVkpdhJctIUhb8gZWFUlZWWiylD/IPtoWVlbZkkEWRESwsiqAiK4uC+AFZhRUWYSEp3fvevG/e5N1Unjtzd2fevDk31f3gcM7lfp/vd84595wY43gYwA4wA5wA34BXwBvQgx7kAbwFtoD/XQAWgClgGlgD9oB/u/wLWAE2gU3gJ3AEjAO7wB3wErgCFoDTwC/gBPiLgL/ZDHwDxgGNzL8L8B/O3w+B4+ABsAzsgwdwHpgEboDDwD6wBxyC/1gBvoNPYAyoAEeAF8AB8D+gC9wB3nQp8Af4SIfsEZh02fA94D4gBHy8BdwCqkB3IqAsUAW8A36Cv3AHTAHzQANQh6I/B0QHysAVsAZ0+w3YAp4T2k+Al8AFcBA4C7wDnoBNYBTYBL5XATsA/GgDmAQmAX+BPTAYOAu8BHYD+qgD/AfdkY93gKvgfATeQATwHrgPPLQBNIFd4C1wFpgD5oBGoA5k/xTYBOaiM8kI4G3wHrgOvA9cgf+B9wBq0AfsAU2gFShD2W/AW+A1cAC8AP5VAd4D/oIuA2cA6kC334D9oP9v/w4MAtuAIeB74GvgLrAIXAYmgS/gPXAJ/AQuAMuAj8BZwDNwA+gGzwC/hEApUARUgRmgAJTQz8A5oAeUAUeBEdANKAPd/h5wDdgA7gN7wDywDlwBngY+Bm4Cq4DFwE1gCfgQtAjsBvYBHYA+yAF2gafAe2AKaAI1IAVUgZmgDJSBOfA86HbaAd2BPmAaOAc8BpaA+cAWsA+UAneBY8ApsBp8BU4CW8AG8A1YBpYA+cAWsA+sg0cRAZxHPgLvgRdwD6gC9UAPqAM1oAQUgWpwHvgI/Ae+gTvgL/Ab6PfbwDygDLgG3AHmgQ/gY+Bf4Bvwa4X2wH3gN3AW2AcuA6+BTcAy8A3o9tfgS+AqcBR4W+Fk8K/t+Ev0+GvgZ0sRB9nLfwB902T/f/P5vwAAAABJRU5ErkJggg==" alt="Company Logo">
        <h1>Event Registration</h1>
        <form id="registrationForm">
            <div class="form-group">
                <label for="fullName">Full Name</label>
                <input type="text" id="fullName" placeholder="e.g., John Doe" required>
            </div>
            <div class="form-group">
                <label for="phoneNumber">Phone Number</label>
                <input type="tel" id="phoneNumber" placeholder="e.g., 08123456789" required>
            </div>
            <div class="form-group">
                <label for="companyName">Company Name</label>
                <input type="text" id="companyName" placeholder="e.g., F Sigma Corp" required>
            </div>
            <div class="form-group">
                <label for="email">Email Address (for confirmation only)</label>
                <input type="email" id="email" placeholder="e.g., john.doe@example.com" required>
            </div>
            <button type="submit">Generate QR Code</button>
        </form>
        <div id="qr-output">
            <div id="qrcode"></div>
            <p id="instruction-text">Please save this QR Code and show it upon attending the event.</p>
            <a href="#" id="download-link">Download QR Code</a>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const registrationForm = document.getElementById('registrationForm');
            const qrOutputDiv = document.getElementById('qr-output');
            const qrcodeContainer = document.getElementById('qrcode');
            const instructionText = document.getElementById('instruction-text');
            const downloadLink = document.getElementById('download-link');
            
            registrationForm.addEventListener('submit', function(event) {
                event.preventDefault();

                // Cek apakah library QRCode sudah berhasil dimuat
                if (typeof QRCode === 'undefined') {
                    alert("Gagal memuat library QR Code. Mohon periksa koneksi internet Anda atau matikan Ad-Blocker.");
                    return;
                }

                const fullName = document.getElementById('fullName').value;
                const phoneNumber = document.getElementById('phoneNumber').value;
                const companyName = document.getElementById('companyName').value;
                const dataToEncode = `Name: ${fullName}\nPhone: ${phoneNumber}\nCompany: ${companyName}`;

                qrcodeContainer.innerHTML = '';

                new QRCode(qrcodeContainer, {
                    text: dataToEncode,
                    width: 256,
                    height: 256,
                    colorDark: "#000000",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.H
                });

                qrOutputDiv.style.display = 'block';
                instructionText.style.display = 'block';
                downloadLink.style.display = 'none';

                setTimeout(function() {
                    const canvas = qrcodeContainer.querySelector('canvas');
                    const img = qrcodeContainer.querySelector('img');
                    let qrDataURL = '';

                    if (canvas) {
                        qrDataURL = canvas.toDataURL('image/png');
                    } else if (img && img.src) {
                        qrDataURL = img.src;
                    }

                    if (qrDataURL) {
                        downloadLink.href = qrDataURL;
                        downloadLink.download = `QRCode-${fullName.replace(/\s+/g, '-')}.png`;
                        downloadLink.style.display = 'inline-block';
                    }
                }, 500);
            });
        });
    </script>
</body>
</html>
